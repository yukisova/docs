# Linux指令

## 目录相关
::: tabs
@tab cd
**ChangeDirectory-更改目录**  
```
cd [参数] 目录

特殊目录：
  .：当前工作目录
  ..：上一级工作目录
  -：上一次工作目录
  ~：当前用户目录
  /：根目录
```
@tab ls
**List-列出目录内容**
```
ls [参数] 目录

参数：
  -a：列出所有文件，包括隐藏文件
  -l：详细输出文件夹中内容
  -h：以可阅读的形式输出文件大小
  --full-time：以完整时间格式输出
  -t：针对最后修改时间进行排序
  -F：在不同种类的文件末尾标识上特殊符号
  -d：显示要列出的目录本身的信息
  -r：逆序列出文件
  -S：针对文件大小进行排序
  -i：列出文件的元信息（inode id号）
```  

@tab mkdir
**MakeDirectory-创建文件夹**
```
mkdir [参数] 新目录名

::: info 

:::
参数：
  -
```

@tab mv
  
@tab cp
  
@tab pwd
**PrintWorkDirectory-打印工作目录**
```
pwd 相对路径
```
:::
### 文件操作
::: tabs
@tab touch
  创建文件

@tab rm
  删除

@tab cat
  预览文件

@tab tail
  查看文件末尾

@tab less
  翻页预览

@tab more
:::
### 其他操作
:::tabs
@tab find
  检索文件

@tab whereis


@tab which


@tab su
**切换命令行用户**
```
su [用户名]
```

@tab sudo
  用户临时权限

@tab service

@tab free

@tab df

@tab mount

@tab uname

@tab scp

@tab ftp

:::
### 权限相关
:::tabs
@tab useradd
  新建用户

@tab groupadd
  新建用户组，所有用户组信息存在/etc/group下

@tab chgrp
  修改指定用户所在的组

@tab chown
  修改文件的所有者u的身份，让文件只能由根用户和指定用户访问
  chown sora file.txt 将文件分配给sora，这个sora默认是root组下的
  chown sora:abc file.txt 将文件分配给abc组下的sora

@tab chmod
  增加和解除文件权限
  文件用户：u-文件所有者 g-文件所有者同组用户 o-其他用户 (数字写法每一位都对应一个用户) a-所有用户
  文件权限：r-读4 w-写2 x-执行1 
  命令参数：-R 地柜改变文件夹下所有文件的权限
  包含两种写法
  chmod u+rw file.txt
  chmod 600 file.txt   
 
@tab chattr

@tab cksum

@tab cmp

@tab diff

@tab diffstat

@tab file

@tab wc

@tab cut  
:::
## Linux三剑客-Grep
概述：文本搜索工具，根据用户指定的"模式"对目标文本逐行匹配检查，并打印匹配到的行  
模式：由正则表达式元字符与文本字符编写的过滤条件  
```
grep [参数] [模式] 文件数据

参数：
  -i：忽略字符大小写
  -o：仅显示匹配到的字符串本身，不再匹配整个行
  -w：只匹配过滤的单词
  -v：排除匹配的结果
  -n：显示匹配行的行号
  -c：统计匹配的行数
  -E：支持使用ERE
  -q：不输出任何信息
```

## Linux三剑客-Sed
概述：流编辑器，用于操作、过滤和转换文本内容，可以结合正则表达式对文件实现快速增删改查
工作流程：
1. sed在文件中一次读取一行，放入内存中等待操作。
2. 进行模式匹配，依据条件与模式进行匹配
3. 匹配成功，对匹配结果进行对应编辑，并输出到屏幕，编辑结果保存到源文件中
4. 匹配失败，默认将整个文件输出到屏幕，可以取消
```
sed [参数] '[匹配范围+命令字符+字符串]' [输入文件]

参数：
  -n：取消默认sed的输出，与命令字符p一起用
  -i：直接将修改结果写入文件，如果不加上该参数，修改结果只会写入内存
  -e：允许多次编辑，不用再使用管道符
  -r：支持ERE

命令字符：
  a：在指定行后添加一行/多行文本
  i：在指定行前添加一行/多行文本
  d：删除匹配行
  p：打印匹配行的内容
  s/正则/替换内容/g：替换，正则匹配，然后替换内容，加g代表全局匹配

匹配范围
  空地址：全文处理
  单地址：指定文件某一行
  /模式/：被模式匹配到的所有行
  范围区间：10,20——10到20行；10,+5——10行向下5行；/模式1/,/模式2/——多种匹配模式
  步长：1~2——从1开始步长为2。
```
案例：  
`sed -i -r '/*/,/+/a I m' abc.txt`——在abc.txt文件中在所有字符后追加I m  

## Linux三剑客-Awk
概述：文本格式化工具，按行处理文件，根据用户指定的分隔符工作，没有指定则默认为空格  
可以实现类似将文本数据格式化为专业excel的样式，可以对文件进行复杂处理，甚至可以看成一门编程语言，支持条件判断、数组、循环  
```
awk [参数] [语句] '[模式]{[动作]}' [文件数据]

参数：
  -F：指定分隔字段符，作用相当于临时修改FS
  -v：定义或修改一个awk内部变量
  -f：从脚本中读取awk命令
```
### Awk-文本格式化
awk最常用的动作便是print，对应的文本格式化输出如下（可以自定义输出的格式）  
`'{print $1,$2}'`：以逗号形式分隔并输出第一行和第二行
- `$0`：输出完整内容  
- `$数字或变量`：输出值对应列的所有数据
- `$表达式`：根据表达式值输出对应列所有数据

### Awk-内置变量
- `FS`：输入字段分隔符，默认为空格，若修改其值则等于更改字段分隔方式
- `OFS`：输出字段分隔符
- `RS`：输入记录分隔符，默认为换行符，若修改其值则等于更改记录的分隔方式
- `ORS`：输出记录分隔符，
- `NF`：列数（字段数）
- `NR`：行数（记录数）
- `FNR`：Awk可以同时指定多个文件，FNR记录分别记录每个文件的行数
- `FILENAME`：当前文件名
- `ARGC`：命令行参数个数
- `ARGV`：数组，保存命令行给定各参数

### Awk-格式化输出
print只会实现最基本的输出，如果要实现字段格式化输出，需要使用printf动作  
`'{printf 格式字符串,对应变量}'`

### 模式
可以将模式理解为条件，只有符合模式的才会被格式化处理  
模式和动作可以任意指定个数
- `BEGIN`和`END`：条件设置模式；在处理文本前/后，执行指定动作，类似钩子函数
- `FS=="-"`：关系运算符模式；针对每一个匹配到的行判断变量条件，条件满足才会执行对应动作，案例里判断条件为输入字段分隔符是否为-
- `/正则表达式/`：正则匹配模式；只有匹配成功的行才会进行格式化处理
- `/正则1/,/正则2/`：行范围模式；两个正则匹配行之间的内容进行格式化处理

##